#!/bin/bash

HOSTS="/private/etc/hosts"
MYHOSTS="$(dirname "$0")/etc/hosts"
if [ ! -f "$MYHOSTS" ]; then
  echo 'could not find user hosts file at '"$MYHOSTS"
  exit 1
fi

if [ ! -w "$HOSTS" ]; then
  echo 'could not write to hosts file at '"$HOSTS"
  exit 1
fi

exec >"$HOSTS"

echo "# GENERATED BY $0"
echo "#"
echo "# Inclusion: $MYHOSTS"
cat "$MYHOSTS"

URL="https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts"
echo
echo '# Inclusion: '"$URL"
curl -q "$URL"
